<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">

<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… ÙƒØ§Ù…Ù„ | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø§Ø¡ | Ø§Ø³ØªÙ…Ø§Ø¹ ÙˆØªØ­Ù…ÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ</title>

<meta name="description" content="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… ÙƒØ§Ù…Ù„ 114 Ø³ÙˆØ±Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø§Ø¡ØŒ ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØŒ ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±ØŒ Ø®ØªÙ…Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©ØŒ ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ©.">
<meta name="keywords" content="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…, Ù‚Ø±Ø¢Ù† mp3, ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù†, Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø§Ø¡, Ø®ØªÙ…Ø© Ù‚Ø±Ø¢Ù†">
<meta name="author" content="H-M">

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" href="favicon.ico">

<style>
:root{
  --bg:#0f172a;
  --text:#ffffff;
  --card:#1e293b;
  --btn:#22c55e;
}
.light{
  --bg:#f5f5f5;
  --text:#000000;
  --card:#ffffff;
}
body{
  margin:0;
  padding:15px;
  background:var(--bg);
  color:var(--text);
  font-family:Tahoma, Arial;
  direction:rtl;
}
.box{
  max-width:500px;
  margin:auto;
  background:var(--card);
  padding:15px;
  border-radius:12px;
}
h1,h2{text-align:center}
select,input,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  font-size:16px;
  border-radius:8px;
  border:none;
}
button{
  background:var(--btn);
  font-weight:bold;
}
.toggle{
  background:#64748b;
  color:#fff;
}
audio{
  width:100%;
  margin-top:10px;
}
footer{
  margin-top:20px;
  text-align:center;
  font-size:14px;
  opacity:.85;
}
.counter{
  text-align:center;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="box">

<h1>ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
<h2>Ø§Ø³ØªÙ…Ø§Ø¹ â€¢ ØªØ­Ù…ÙŠÙ„ â€¢ Ø®ØªÙ…Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©</h2>

<button class="toggle" onclick="toggleMode()">ğŸŒ™ / â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹</button>

<input id="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø©">

<select id="reciters"></select>
<select id="surahs"></select>

<button onclick="play()">â–¶ï¸ ØªØ´ØºÙŠÙ„</button>

<audio id="player" controls></audio>

<a id="download" download>
<button>â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©</button>
</a>

<button onclick="khatma()">ğŸ“– Ø£ØªÙ…Ù…Øª Ø®ØªÙ…Ø©</button>

<div class="counter">
ğŸ¤² Ø¹Ø¯Ø¯ Ø§Ù„Ø®ØªÙ…Ø§Øª: <span id="kcount"></span><br>
ğŸ‘ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª: <span id="visits"></span>
</div>

</div>

<footer>
ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù† Ø±ÙˆØ­ ÙƒÙ„ Ù…Ù† Ù‚Ø±Ø£ ÙˆØ³Ù…Ø¹ ğŸ¤  
<br>
ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙˆØ§Ø³Ø·Ø© H-M
</footer>

<script>
const body=document.body;
const recitersSelect=document.getElementById("reciters");
const surahsSelect=document.getElementById("surahs");
const player=document.getElementById("player");
const download=document.getElementById("download");
const search=document.getElementById("search");

let reciters=[];
let suwar=[];

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
if(localStorage.mode==="light") body.classList.add("light");
function toggleMode(){
  body.classList.toggle("light");
  localStorage.mode = body.classList.contains("light") ? "light" : "dark";
}

/* Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª */
let visits = localStorage.visits || 0;
visits++;
localStorage.visits = visits;
document.getElementById("visits").innerText = visits;

/* Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®ØªÙ…Ø© */
let k = localStorage.khatma || 0;
document.getElementById("kcount").innerText = k;
function khatma(){
  k++;
  localStorage.khatma = k;
  document.getElementById("kcount").innerText = k;
  if(navigator.share){
    navigator.share({
      title:"Ø®ØªÙ…Ø© Ù‚Ø±Ø¢Ù†",
      text:"Ø´Ø§Ø±ÙƒØª ÙÙŠ Ø®ØªÙ…Ø© Ù‚Ø±Ø¢Ù† â€“ ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© ğŸ¤",
      url:location.href
    });
  }else{
    alert("Ø¬Ø²Ø§Ùƒ Ø§Ù„Ù„Ù‡ Ø®ÙŠØ±Ù‹Ø§ ğŸ¤");
  }
}

/* Ø¬Ù„Ø¨ Ø§Ù„Ù‚Ø±Ø§Ø¡ */
fetch("https://api.mp3quran.net/api/v3/reciters")
.then(r=>r.json())
.then(d=>{
  reciters = d.reciters;
  reciters.forEach((r,i)=>{
    recitersSelect.innerHTML += `<option value="${i}">${r.name}</option>`;
  });
});

/* Ø¬Ù„Ø¨ Ø§Ù„Ø³ÙˆØ± */
fetch("https://api.mp3quran.net/api/v3/suwar")
.then(r=>r.json())
.then(d=>{
  suwar = d.suwar;
  renderSuwar(suwar);
});

function renderSuwar(list){
  surahsSelect.innerHTML="";
  list.forEach(s=>{
    surahsSelect.innerHTML += `<option value="${s.id}">${s.name}</option>`;
  });
}

/* Ø§Ù„Ø¨Ø­Ø« */
search.oninput = ()=>{
  renderSuwar(suwar.filter(s=>s.name.includes(search.value)));
};

/* ØªØ´ØºÙŠÙ„ */
function play(){
  const r = reciters[recitersSelect.value];
  const s = surahsSelect.value.toString().padStart(3,"0");
  const url = r.moshaf[0].server + s + ".mp3";
  player.src = url;
  download.href = url;
  player.play();
}

/* ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ */
player.onended = ()=>{
  if(surahsSelect.selectedIndex < surahsSelect.options.length-1){
    surahsSelect.selectedIndex++;
    play();
  }
};
</script>

</body>
  </html>
  
